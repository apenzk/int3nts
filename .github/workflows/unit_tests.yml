name: "Unit Tests"
on:
  pull_request:
  push:
    branches:
      - main
      - real-main

jobs:
  move:
    uses: ./.github/workflows/unit-tests-reusable.yml
    with:
      script: "cd intent-frameworks/mvm && movement move test --dev --named-addresses mvmt_intent=0x123"

  evm:
    uses: ./.github/workflows/unit-tests-reusable.yml
    with:
      script: "cd intent-frameworks/evm && npm install && npm test"

  svm:
    uses: ./.github/workflows/unit-tests-reusable.yml
    with:
      script: "cd intent-frameworks/svm && ./scripts/test.sh"

  solver:
    uses: ./.github/workflows/unit-tests-reusable.yml
    with:
      script: "cd solver && cargo test"

  coordinator:
    uses: ./.github/workflows/unit-tests-reusable.yml
    with:
      script: "cd coordinator && cargo test"

  trusted-gmp:
    uses: ./.github/workflows/unit-tests-reusable.yml
    with:
      script: "cd trusted-gmp && cargo test"

  frontend:
    uses: ./.github/workflows/unit-tests-reusable.yml
    with:
      script: "cd frontend && npm install --legacy-peer-deps && npm test"

